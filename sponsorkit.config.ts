import { defineConfig, presets, BadgePreset } from 'sponsorkit'

const RSS3_LOGO = (width: number, y: number) => `
<a xlink:href="https://rss3.io" class="sponsorkit-link" target="_blank" id="RSS3">
<svg x="${(width - 274)/2}" y="${y}" width="274" height="64" viewBox="0 0 274 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<mask id="mask0_1_11" style="mask-type:luminance" maskUnits="userSpaceOnUse" x="0" y="0" width="274" height="64">
<path d="M274 0.404938H0V64H274V0.404938Z" fill="white"/>
</mask>
<g mask="url(#mask0_1_11)">
<path d="M59.2007 0.993286H1.92732C0.867295 0.993286 0 1.84296 0 2.95408V61.8433C0 62.9217 0.867295 63.804 1.92732 63.804H59.2007C60.2607 63.804 61.128 62.9217 61.128 61.8433V2.95408C61.128 1.87564 60.2607 0.993286 59.2007 0.993286ZM53.0011 53.5425C52.7763 53.9021 52.3908 54.1308 51.9733 54.1308H42.9149C42.4652 54.1308 42.0476 53.8693 41.8549 53.4445L36.7154 42.9216C36.362 42.2353 35.6553 41.7778 34.8844 41.7778H19.241C18.9198 41.7778 18.6629 42.0392 18.6629 42.366V52.9543C18.6629 53.6406 18.1167 54.1635 17.4743 54.1635H10.3111C9.63655 54.1635 9.12264 53.6079 9.12264 52.9543V33.281C9.12264 32.5947 9.66868 32.0718 10.3111 32.0718H34.4026C35.2699 32.0718 36.0087 31.3529 36.0087 30.4378V22.0718C36.0087 21.1894 35.302 20.4378 34.4026 20.4378H10.3111C9.63655 20.4378 9.12264 19.8823 9.12264 19.2287V11.941C9.12264 11.2548 9.66868 10.7319 10.3111 10.7319H35.5268C36.2014 10.7319 36.7154 11.2875 36.7154 11.941V17.7254C36.7154 18.6077 37.422 19.3594 38.3214 19.3594H44.3604C45.0349 19.3594 45.5489 19.915 45.5489 20.5686V31.9411C45.5489 32.6274 45.0028 33.1503 44.3604 33.1503H38.3214C37.4542 33.1503 36.7154 33.8693 36.7154 34.7843V38.9673C36.7154 40.1111 37.6148 41.0262 38.7391 41.0262H46.7053C47.155 41.0262 47.5726 41.2876 47.7653 41.7124L53.0011 52.3988C53.1939 52.7909 53.1618 53.2158 52.9369 53.5752L53.0011 53.5425Z" fill="#1477FB"/>
<path d="M159.582 28.6078L146.829 26.9085C143.617 26.451 139.955 24.4902 138.831 20.4052C137.289 14.7189 141.947 9.22867 147.729 9.22867H154.539C160.802 9.22867 163.95 15.1764 164.207 20.6666V21.0588H173.426V20.634C172.848 7.39856 165.075 0.40509 150.941 0.40509C137.546 0.40509 129.58 7.16983 129.58 18.4771C129.58 27.8889 135.201 34.2288 144.612 35.5033L157.558 37.3007C162.344 37.8563 165.428 41.2876 165.428 46.0915C165.428 51.4511 161.637 55.1766 156.208 55.1766H147.536C140.822 55.1766 137.771 49.0981 137.225 43.8694V43.5099H128.005V43.9347C128.295 57.2354 136.261 63.9675 151.711 63.9675C166.166 63.9675 174.454 57.2028 174.454 45.4053C174.454 35.8954 169.186 29.9151 159.613 28.5425L159.582 28.6078Z" fill="#1477FB"/>
<path d="M209.916 28.6078L197.164 26.9085C193.952 26.451 190.29 24.4902 189.166 20.4052C187.624 14.7189 192.282 9.22867 198.063 9.22867H204.874C211.138 9.22867 214.286 15.1764 214.542 20.6666V21.0588H223.761V20.634C223.183 7.39856 215.409 0.40509 201.276 0.40509C187.881 0.40509 179.914 7.16983 179.914 18.4771C179.914 27.8889 185.536 34.2288 194.948 35.5033L207.893 37.3007C212.679 37.8563 215.763 41.2876 215.763 46.0915C215.763 51.4511 211.972 55.1766 206.544 55.1766H197.871C191.157 55.1766 188.106 49.0981 187.56 43.8694V43.5099H178.341V43.9347C178.63 57.2354 186.596 63.9675 202.047 63.9675C216.502 63.9675 224.789 57.2028 224.789 45.4053C224.789 35.8954 219.521 29.9151 209.949 28.5425L209.916 28.6078Z" fill="#1477FB"/>
<path d="M265.327 30.2092C264.909 30.013 264.877 29.4575 265.295 29.2287C269.856 26.647 272.265 22.2679 272.265 16.4836C272.265 11.647 270.274 0.372406 251.803 0.372406C237.766 0.372406 229.543 7.10447 228.676 19.3595V21.0261H237.766V19.4248C238.055 13.477 242.585 8.99989 248.302 8.99989H254.502C259.738 8.99989 263.239 12.5293 263.239 17.7908C263.239 23.0522 259.995 26.5163 254.759 26.5163H244.48C244.191 26.5163 243.934 26.7778 243.934 27.0719V33.902C243.934 34.1961 244.191 34.4575 244.48 34.4575H255.241C261.247 34.4575 265.006 38.5098 265.006 45.0458C265.006 51.5818 261.151 55.34 254.984 55.34H248.431C242.359 55.34 237.831 50.3073 237.381 43.1177V42.1046H228.226V43.183C229.029 57.17 236.739 63.9675 251.836 63.9675C265.937 63.9675 274.032 57.1047 274.032 45.1439C274.032 37.9216 271.045 32.7909 265.327 30.1765V30.2092Z" fill="#1477FB"/>
<path d="M113.551 35.7321C120.971 33.281 125.564 27.0065 125.564 19.2287C125.564 9.06524 117.695 1.71228 106.869 1.71228H81.2684C80.8828 1.71228 80.5939 2.03908 80.5939 2.39856V28.1503C80.5939 28.5424 80.9152 28.8366 81.2684 28.8366H87.6286C88.7205 28.8366 89.6203 29.7516 89.6203 30.8627V34.4575C89.6203 35.5686 88.7205 36.4837 87.6286 36.4837H81.2684C80.8828 36.4837 80.5939 36.8105 80.5939 37.1699V61.974C80.5939 62.3662 80.9152 62.6602 81.2684 62.6602H88.9133C89.299 62.6602 89.5879 62.3335 89.5879 61.974V38.7386C89.5879 37.6275 90.4877 36.7124 91.5796 36.7124H103.625C103.882 36.7124 104.107 36.8432 104.236 37.0719L117.984 62.4315L118.112 62.6276H127.01C127.524 62.6276 127.845 62.0721 127.62 61.5818L113.583 35.6667L113.551 35.7321ZM89.6203 26.7778V10.4705C89.6203 10.0784 89.941 9.7842 90.2948 9.7842H106.388C112.458 9.7842 116.506 13.5751 116.506 19.2287C116.506 24.8823 112.427 28.7713 106.388 28.7713H91.5796C90.4877 28.7713 89.5879 27.8562 89.5879 26.7451L89.6203 26.7778Z" fill="#1477FB"/>
</g>
</svg>
</a>
`

const past: BadgePreset = {
  avatar: {
    size: 20,
  },
  boxWidth: 22,
  boxHeight: 22,
  container: {
    sidePadding: 35,
  },
}

export default defineConfig({
  formats: ['svg', 'json'],
  afdian: {
    exechangeRate: 740,
  },
  tiers: [
    {
      title: 'Past Sponsors',
      monthlyDollars: -1,
      preset: presets.xs,
    },
    {
      title: 'Donors',
      preset: presets.base,
    },
    {
      title: 'Patrons',
      monthlyDollars: 10,
      preset: {
        ...presets.medium,
        name: {
          maxLength: 8,
        },
      },
    },
    {
      title: 'Benefactors',
      monthlyDollars: 100,
      preset: {
        ...presets.large,
        name: {
          maxLength: 8,
        },
      },
    },
    {
      title: 'Special Sponsor',
      monthlyDollars: Infinity,
      composeAfter(compose,_,config) {
        if (config.filter?.({ monthlyDollars: Infinity } as any, []) !== false) { 
          compose
            .addSpan(20)
            .addText('Special Sponsor', 'sponsorkit-tier-title')
            .addSpan(10)
            .addRaw(RSS3_LOGO(config.width!, compose.height))
            .addSpan(110)
        }
      }
    },
  ],
})